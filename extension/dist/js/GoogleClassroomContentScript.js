(()=>{"use strict";window.addEventListener("click",(function e(t){console.log("Detected a click");let o=t.target;if("A"===o.nodeName){let n=o.getAttribute("href");if(n.includes("youtube")){t.preventDefault(),console.log("Stopped redirection to Youtube"),window.removeEventListener("click",e);let o=document.createElement("div");o.id="studyModeLocker",o.addEventListener("click",(e=>{e.stopPropagation(),console.log("Overlay clicked")})),document.getElementsByTagName("BODY")[0].appendChild(o),function(e){let t=document.getElementById("studyModeLocker");console.log(e);let o=document.createElement("DIV"),n=document.createElement("BUTTON"),i=document.createElement("I"),d=document.createElement("BUTTON"),a=document.createElement("I");i.setAttribute("class","fas fa-times-circle icon-left-padding"),n.setAttribute("class","button exit-button"),n.innerText="Leave",n.addEventListener("click",(t=>function(e,t){e.stopPropagation();let o=document.getElementById("studyModeLocker");o&&(o.remove(),window.addEventListener("click",t))}(t,e))),a.setAttribute("class","fas fa-question icon-left-padding"),d.setAttribute("class","button question-button"),d.innerText="Question",d.addEventListener("click",(e=>async function(e){e.stopPropagation(),console.debug("Question ButtonPressed at "+player.getCurrentTime())}(e))),n.appendChild(i),d.appendChild(a),o.setAttribute("class","button-container"),o.appendChild(n),o.appendChild(d),t.appendChild(o)}(e),function(e){let t=document.getElementById("studyModeLocker"),o=e.split("youtube.com/watch?v="),n="hXDiv7f73H0";n=2==o.length?o[1]:o[0];let i=document.createElement("div"),d=document.createElement("iframe");i.id="videoWrapper",d.id="videoIFrame",d.origin="youtube.com",d.setAttribute("width","100%"),d.setAttribute("height","100%"),d.setAttribute("class","youtubeIFrame"),d.src=`https://www.youtube-nocookie.com/embed/${n}?enablejsapi=1&controls=0`,i.appendChild(d),t.appendChild(i),console.log("trying to register12"),new YT.Player("videoIFrame",{events:{onReady:e=>{console.debug("Embedded Youtube Player is ready"),window.localStorage.setItem("youtube_video_id",n),window.localStorage.setItem("youtube_video_duration",e.target.getDuration()),window.localStorage.setItem("youtube_video_title",e.target.getVideoData().title)},onStateChange:e=>{console.debug("Embedded Youtube Player has a new change"),e.data,YT.PlayerState.ENDED}}})}(n)}}})),console.log("Google Classroom Overlay registered")})();